openapi: 3.0.0
info:
  title: EasyMinerAPI
  version: 1.0.0
  description: Esta é a documentação da API do EasyMiner.
servers:
  - url: https://easyminerapi.fly.dev/api

paths:
  /auth/csrf-token:
    get:
      tags:
        - Autenticação
      summary: Obter token CSRF
      description: Gera e retorna um token CSRF.
      responses:
        '200':
          description: Operação bem sucedida.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        csrf_token:
                          type: string
                          description: Token CSRF.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Retornado um Token CSRF para ser utilizado no header das requisições subsequentes.
                  value:
                    {
                      "message": "Token CSRF gerado com sucesso!",
                      "success": true,
                      "data": [
                        {
                          "csrf_token": "ImQ5MTc1NDI4MGIwZTk0MGJjZmFkNziMTExNDk5OWQ3ZWRhNDIi.ZyA8C9cBRr1EZLzs3vrQDK7s6RyOZVxs"
                        }
                      ]
                    }

  /auth/login:
    post:
      tags:
        - Autenticação
      summary: Login de usuário
      description: Autentica um usuário com base no email e senha fornecidos.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  description: Endereço de email do usuário.
                password:
                  type: string
                  description: Senha do usuário.
            examples:
              success:
                summary: Exemplo de requisição
                value:
                  {
                    "login": "usuario@gmail.com",
                    "password": "senhaSegura123",
                  }
      responses:
        '200':
          description: Operação bem sucedida.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Autenticação completa, habilitando o usuário a utilizar o sistema.
                  value:
                    {
                      "message": "Login realizado com sucesso!",
                      "success": true,
                      "data": null
                    }

        '401':
          description: Servidor não conseguiu autenticar a solicitação.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                invalid_credentials:
                  summary: Exemplo de resposta
                  description: Erro retornado o usuário tenta fazer login com credenciais que não são reconhecidas pelo sistema.
                  value:
                    {
                      "message": "Credenciais inválidas!",
                      "success": false,
                      "data": null
                    }

        '422':
          description: Erros de validação.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                          description: Nome do campo que gerou o erro.
                        error:
                          type: string
                          description: Mensagem de erro associada ao campo.
              examples:
                validation_error_email:
                  summary: Exemplo de resposta 1
                  description: Erro retornado quando o usuário forneceu um endereço de email inválido na requisição.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": [
                        {
                          "email": "Endereço de email inválido."
                        }
                      ]
                    }
                validation_error_password:
                  summary: Exemplo de resposta 2
                  description: Erro retornado quando o usuário não preencheu o campo de senha na requisição.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": [
                        {
                          "password": "O campo é obrigatório."
                        }
                      ]
                    }
  /auth/logout:
    post:
      tags:
        - Autenticação
      summary: Logout de usuário
      description: Realiza o logout do usuário atualmente autenticado.
      responses:
        '200':
          description: Operação bem sucedida.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Logout do usuário bem sucedido, agora o usuário não está mais autenticado.
                  value:
                    {
                      "message": "Logout realizado com sucesso!",
                      "success": true,
                      "data": null
                    }
        '401':
          description: Não autorizado!.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Usuário não está autenticado.
                  value:
                    {
                      "message": "Não autorizado!!",
                      "success": false,
                      "data": null
                    }
  /auth/me:
    get:
      tags:
        - Autenticação
      summary: Obter usuário atual
      description: Retorna os detalhes do usuário autenticado atualmente.
      responses:
        '200':
          description: Operação bem sucedida.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          description: ID do usuário.
                        name:
                          type: string
                          description: Nome do usuário.
                        phone_number:
                          type: string
                          description: Número de telefone do usuário.
                        email:
                          type: string
                          format: email
                          description: Endereço de email do usuário.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Operação bem sucedida, retornando as informações do usuário autenticado.
                  value:
                    {
                      "message": "Usuário atual recuperado com sucesso!",
                      "success": true,
                      "data": [
                        {
                          "id": 593,
                          "name": "Willian Gustavo Rocha Leme",
                          "phone_number": "+55 11 98765-4321",
                          "email": "willian_leme@proton.me"
                        }
                      ]
                    }

        '401':
          description: Não autorizado.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Usuário não está autenticado.
                  value:
                    {
                      "message": "Não autorizado!",
                      "success": false,
                      "data": null
                    }
  /users:
    post:
      tags:
        - "CRUD de Usuários"
      summary: "Criar usuário"
      description: "Cria um novo usuário."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - phone_number
                - email
                - password
              properties:
                name:
                  type: string
                  description: Nome do usuário.
                  minLength: 10
                  maxLength: 150
                phone_number:
                  type: string
                  description: Número de telefone do usuário.
                  minLength: 11
                  maxLength: 20
                email:
                  type: string
                  format: email
                  description: Endereço de email do usuário.
                  minLength: 6
                  maxLength: 200
                password:
                  type: string
                  description: Senha do usuário.
                  minLength: 8
                  maxLength: 30
            examples:
              success:
                summary: Exemplo de requisição
                value:
                  {
                    "name": "Willian Gustavo Rocha Leme",
                    "phone_number": "+55 11 98765-4321",
                    "email": "willian_leme@proton.me",
                    "password": "senhaSegura123"
                  }
      responses:
        '201':
          description: "Novo registro criado com sucesso."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          description: ID do usuário.
                        name:
                          type: string
                          description: Nome do usuário.
                        phone_number:
                          type: string
                          description: Número de telefone do usuário.
                        email:
                          type: string
                          format: email
                          description: Endereço de email do usuário.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Usuário criado, os detalhes do novo usuário são retornados.
                  value:
                    {
                      "message": "Usuário criado com sucesso!",
                      "success": true,
                      "data": [
                        {
                          "id": 593,
                          "name": "Willian Gustavo Rocha Leme",
                          "phone_number": "+55 11 98765-4321",
                          "email": "willian_leme@proton.me"
                        }
                      ]
                    }
        '422':
          description: "Erros de validação."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                          description: Nome do campo que gerou o erro.
                        error:
                          type: string
                          description: Mensagem de erro associada ao campo.
              examples:
                phone_validation_error:
                  summary: Exemplo de resposta 1
                  description: Informa o erro de validação associado ao campo de telefone.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": [
                        {
                          "phone_number": "Número de telefone já cadastrado."
                        }
                      ]
                    }
                email_validation_error:
                  summary: Exemplo de resposta 2
                  description: Informa o erro de validação associado ao campo de email.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": [
                        {
                          "email": "Endereço de email inválido."
                        }
                      ]
                    }
        '500':
          description: "Erro interno do servidor!"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: string
                    description: "Mensagem de erro do servidor."
              examples:
                internal_server_error:
                  summary: Exemplo de resposta.
                  description: Erro inesperado no servidor.
                  value:
                    {
                      "message": "Erro ao criar o usuário!",
                      "success": false,
                      "data": "werkzeug.exceptions.InternalServerError: 500 Internal Server Error"
                    }

    put:
      tags:
        - "CRUD de Usuários"
      summary: "Atualizar dados do usuário"
      description: "Atualiza os detalhes do usuário autenticado atualmente."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: Nome do usuário.
                  minLength: 10
                  maxLength: 150
                phone_number:
                  type: string
                  description: Número de telefone do usuário.
                  minLength: 11
                  maxLength: 20
                email:
                  type: string
                  format: email
                  description: Endereço de email do usuário.
                  minLength: 6
                  maxLength: 200
                password:
                  type: string
                  description: Senha do usuário.
                  minLength: 8
                  maxLength: 30
            examples:
              success:
                summary: Exemplo de requisição
                value:
                  {
                    "name": "Will Leme",
                    "password": "novaSenhaSegura123"
                  }
      responses:
        '200':
          description: "Operação bem sucedida."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          description: ID do usuário.
                        name:
                          type: string
                          description: Nome do usuário.
                        phone_number:
                          type: string
                          description: Número de telefone do usuário.
                        email:
                          type: string
                          format: email
                          description: Endereço de email do usuário.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Usuário atualizado com sucesso; os detalhes do usuário atualizado são retornados.
                  value:
                    {
                      "message": "Usuário atualizado com sucesso!",
                      "success": true,
                      "data": [
                        {
                          "id": 690,
                          "name": "Will Leme",
                          "phone_number": "+55 11 98765-4321",
                          "email": "willian_leme@proton.me"
                        }
                      ]
                    }
        '422':
          description: "Erros de validação."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                          description: Nome do campo que gerou o erro.
                        error:
                          type: string
                          description: Mensagem de erro associado ao campo.
              examples:
                validation_size_error:
                  summary: Exemplo de resposta
                  description: Informa o erro de validação associado ao campo de email.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": [
                        {
                          "email": "Tamanho deve estar entre 6 e 200"
                        }
                      ]
                    }
        '404':
          description: "Não encontrado."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                not_found:
                  summary: Exemplo de resposta
                  description: Usuário não encontrado; nenhum dado retornado.
                  value:
                    {
                      "message": "Usuário não encontrado!",
                      "success": false,
                      "data": null
                    }
        '500':
          description: "Erro interno do servidor!"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: string
                    description: "Mensagem de erro do servidor."
              examples:
                internal_server_error:
                  summary: Exemplo de resposta 1
                  description: Erro inesperado no servidor.
                  value:
                    {
                      "message": "Erro ao atualizar o usuário!",
                      "success": false,
                      "data": "sqlalchemy.exc.TimeoutError: QueuePool limit of size 5 overflow 10 reached, connection timed out; 30 second timeout"
                    }
    delete:
      tags:
        - "CRUD de Usuários"
      summary: "Excluir usuário"
      description: "Exclui o usuário autenticado atualmente e todos os dados relacionados a ele, como projetos, datasets, etc."
      responses:
        '200':
          description: "Operação bem sucedida."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          description: ID do usuário.
                        name:
                          type: string
                          description: Nome do usuário.
                        phone_number:
                          type: string
                          description: Número de telefone do usuário.
                        email:
                          type: string
                          format: email
                          description: Endereço de email do usuário.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Usuário deletado com sucesso; os detalhes do usuário deletado são retornados.
                  value:
                    {
                      "message": "Usuário deletado com sucesso!",
                      "success": true,
                      "data": [
                        {
                          "id": 690,
                          "name": "João da Silva II",
                          "phone_number": "5511987654321",
                          "email": "Joao@gmail.com"
                        }
                      ]
                    }
        '404':
          description: "Não encontrado."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                not_found:
                  summary: Exemplo de resposta
                  description: Usuário não encontrado; nenhum dado retornado.
                  value:
                    {
                      "message": "Usuário não encontrado!",
                      "success": false,
                      "data": null
                    }

        '500':
          description: "Erro interno do servidor!"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: string
                    description: "Mensagem de erro do servidor."
              examples:
                internal_server_error:
                  summary: Exemplo de resposta 1
                  description: Erro inesperado no servidor.
                  value:
                    {
                      "message": "Erro ao deletar o usuário!",
                      "success": false,
                      "data": "werkzeug.exceptions.InternalServerError: 500 Internal Server Error"
                    }
                internal_server_error_related_data:
                  summary: Exemplo de resposta 2
                  description: Erro ao deletar um projeto relacionado ao usuário.
                  value:
                    {
                      "message": "Erro ao deletar dados relacionados ao usuário!",
                      "success": false,
                      "data": "sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: projects"
                    }

  # DOCUMENTAÇÃO DE CRUD DE PROJETOS

  /projects:
    get:
      tags:
        - "CRUD de Projetos"
      summary: "Listagem de projetos"
      description: "Retorna uma lista de todos os projetos do usuário autenticado."
      responses:
        '200':
          description: Operação bem sucedida.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          description: ID do projeto.
                        name:
                          type: string
                          description: Nome do projeto.
                        description:
                          type: string
                          description: Descrição do que se trata o projeto.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Operação bem sucedida, retornando a listagem de projetos do usuário autenticado.
                  value:
                    {
                      "message": "Projetos recuperados com sucesso!",
                      "success": true,
                      "data": [
                        {
                            "id": 10,
                            "name": "Projeto 1",
                            "description": "Descriçao do projeto 1"
                        },
                        {
                            "id": 12,
                            "name": "Projeto 2",
                            "description": "Descriçao do projeto 2"
                        },
                        {
                            "id": 14,
                            "name": "Projeto 3",
                            "description": "Descriçao do projeto 3"
                        },
                        {
                            "id": 15,
                            "name": "Projeto 4",
                            "description": "Descriçao do projeto 4"
                        },
                    ]
                    }
        '401':
          description: Não autorizado.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Usuário não está autenticado.
                  value:
                    {
                      "message": "Não autorizado!",
                      "success": false,
                      "data": null
                    }

    post:
      tags:
        - "CRUD de Projetos"
      summary: "Criar projeto"
      description: "Cria um novo projeto."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  description: Nome do projeto.
                  minLength: 2
                  maxLength: 100
                  uniqueItems: true
                description:
                  type: string
                  description: Descrição do que se trata o projeto.
                  minLength: 10
                  maxLength: 2000
            examples:
              success:
                summary: Exemplo de requisição
                value:
                  {
                    "name": "Nome do projeto",
                    "description": "Descrição do poejto"
                  }
      responses:
        '201':
          description: "Novo registro criado com sucesso."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          description: ID do projeto.
                        name:
                          type: string
                          description: Nome do projeto.
                        description:
                          type: string
                          description: Descrição do que se trata o projeto.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Projeto criado, os detalhes do novo projeto são retornados.
                  value:
                    {
                      "message": "Projeto criado com sucesso!",
                      "success": true,
                      "data": {
                        "id": 18,
                        "name": "Projeto para teste",
                        "description": "Descrição teste"
                      }
                    }

        '422':
          description: Erros de validação.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                          description: Nome do campo que gerou o erro.
                        error:
                          type: string
                          description: Mensagem de erro associada ao campo.
              examples:
                validate_required_name_error:
                  summary: Exemplo de resposta 2
                  description: Erro retornado quando o nome do projeto não é fornecido.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": {
                        "name": [
                          "O campo é obrigatório."
                        ]
                      }
                    }
                validate_name_error:
                  summary: Exemplo de resposta 1
                  description: Erro retornado quando o usuário forneceu um nome de projeto que já está sendo utilizado.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": {
                        "name": [
                          "O nome do projeto já existe."
                        ]
                      }
                    }
        '401':
          description: Não autorizado.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Usuário não está autenticado.
                  value:
                    {
                      "message": "Não autorizado!",
                      "success": false,
                      "data": null
                    }

        '500':
          description: "Erro interno do servidor!"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: string
                    description: "Mensagem de erro do servidor."
              examples:
                internal_server_error:
                  summary: Exemplo de resposta.
                  description: Conexão com o banco de dados perdida.
                  value:
                    {
                      "message": "Erro ao criar projeto",
                      "success": false,
                      "data": "(pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')\n[SQL: SELECT users.id AS users_id, users.name AS users_name, users.phone_number AS users_phone_number, users.email AS users_email, users.password_hash AS users_password_hash, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(pk_1)s]\n[parameters: {'pk_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"
                    }

  /projects/{id}:
    get:
      tags:
        - "CRUD de Projetos"
      summary: "Exibição de projeto"
      description: "Retorna os detalhes de um projeto específico do usuário autenticado."
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "integer"
          description: "ID do projeto"
      responses:
        '200':
          description: Operação bem sucedida.
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                    description: ID do projeto.
                  name:
                    type: string
                    description: Nome do projeto.
                  description:
                    type: string
                    description: Descrição do que se trata o projeto.
                  dataset:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          description: ID do dataset.
                        name:
                          type: string
                          description: Nome do dataset.
                        description:
                          type: string
                          description: Descrição do que se trata o dataset.
                        file_url:
                          type: string
                          description: URL do arquivo do dataset.
                        size_file:
                          type: string
                          description: Tamanho do arquivo do dataset.

              examples:
                success:
                  summary: Exemplo de resposta
                  description: Exibição de um projeto em especifico, retornando todos detalhes do projeto e dos datasets relacionados ao projeto.
                  value:
                    {
                      "message": "Projeto recuperado com sucesso!",
                      "success": true,
                      "data": [
                        {
                          "id": 540,
                          "name": "Projeto para predição no setor de creditos",
                          "description": "Este projeto é destinado a realizar o processo de KDD em 3 bases de dados no setor de créditos",
                          "datasets": [
                            {
                              "id": 92,
                              "name": "Dataset teste 2",
                              "description": "Descrição do dataset teste 2",
                              "file_url": "https://s3.amazonaws.com/bucket-easyminer/datasets/92/file",
                              "size_file": "0.29MB"
                            },
                            {
                              "id": 93,
                              "name": "Dataset teste 3",
                              "description": "Descrição do dataset teste 3",
                              "file_url": "https://s3.amazonaws.com/bucket-easyminer/datasets/93/file",
                              "size_file": "0.29MB"
                            },
                            {
                              "id": 94,
                              "name": "Dataset teste 4",
                              "description": "Descrição do dataset teste 4",
                              "file_url": "https://s3.amazonaws.com/bucket-easyminer/datasets/94/file",
                              "size_file": "0.29MB"
                            },
                            {
                              "id": 95,
                              "name": "Dataset teste 5",
                              "description": "Descrição do dataset teste 5",
                              "file_url": "https://s3.amazonaws.com/bucket-easyminer/datasets/95/file",
                              "size_file": "0.29MB"
                            }
                          ]
                        }
                      ]
                    }
        '401':
          description: Não autorizado.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Usuário não está autenticado.
                  value:
                    {
                      "message": "Não autorizado!",
                      "success": false,
                        "data": null
                    }
        '404':
          description: "Não encontrado."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                not_found:
                  summary: Exemplo de resposta
                  description: Projeto não encontrado; nenhum dado retornado.
                  value:
                    {
                      "message": "Projeto não encontrado!",
                      "success": false,
                      "data": null
                    }
    put:
      tags:
        - "CRUD de Projetos"
      summary: "Atualizar projeto"
      description: "Atualiza um projeto existente."
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "integer"
          description: "ID do projeto"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: Nome do projeto.
                  minLength: 2
                  maxLength: 100
                  uniqueItems: true
                description:
                  type: string
                  description: Descrição do que se trata o projeto.
                  minLength: 10
                  maxLength: 2000
            examples:
              success:
                summary: Exemplo de requisição
                value:
                  {
                    "name": "Nome atualizado do projeto",
                  }
      responses:
        '200':
          description: Operação bem sucedida.
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                    description: ID do projeto.
                  name:
                    type: string
                    description: Nome do projeto.
              examples:
                success:
                  summary: Exemplo de resposta.
                  description: Operação bem sucedida, retornando as informações do projeto atualizado.
                  value:
                    {
                      "message": "Projeto atualizado com sucesso!",
                      "success": true,
                      "data": {
                        "id": 14,
                        "name": "Nome atualizado do projeto",
                        "description": "Descriçào do projeto"
                      }
                    }
        '401':
          description: Não autorizado.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: "null"
                    description: Dados adicionais retornados pela operação.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Usuário não está autenticado.
                  value:
                    {
                      "message": "Não autorizado!",
                      "success": false,
                      "data": null
                    }

        '404':
          description: "Não encontrado."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                not_found:
                  summary: Exemplo de resposta
                  description: Projeto não encontrado; nenhum dado retornado.
                  value:
                    {
                      "message": "Projeto não encontrado!",
                      "success": false,
                      "data": null
                    }
        '422':
          description: Erros de validação.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                          description: Nome do campo que gerou o erro.
                        error:
                          type: string
                          description: Mensagem de erro associada ao campo.
              examples:
                validate_name_error:
                  summary: Exemplo de resposta 1
                  description: Erro retornado quando o usuário forneceu um nome de projeto que já está sendo utilizado.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": {
                        "name": [
                          "O nome do projeto já existe."
                        ]
                      }
                    }
                validate_size_error:
                  summary: Exemplo de resposta 2
                  description: Erro retornado quando o tamanho fornecido para o campo de nome do projeto é inválido.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": {
                        "name": [
                          "O tamanho deve estar entre 10 e 150 caracteres."
                        ]
                      }
                    }
        '500':
          description: "Erro interno do servidor!"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: string
                    description: "Mensagem de erro do servidor."
              examples:
                internal_server_error_deleted_related_data:
                  summary: Exemplo de resposta.
                  description: Conexão com o banco de dados perdida.
                  value:
                    {
                      "message": "Erro ao atualizar o projeto!",
                      "success": false,
                      "data": "(pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)')\n[SQL: SELECT users.id AS users_id, users.name AS users_name, users.phone_number AS users_phone_number, users.email AS users_email, users.password_hash AS users_password_hash, users.created_at AS users_created_at, users.updated_at AS users_updated_at \nFROM users \nWHERE users.id = %(pk_1)s]\n[parameters: {'pk_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)"
                    }

    delete:
      tags:
        - "CRUD de Projetos"
      summary: "Exclui projeto"
      description: "Exclui um projeto existente, assim como todos datasets relacionados com o projeto."
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "integer"
          description: "ID do projeto"
      responses:
        '200':
          description: Operação bem sucedida.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          description: ID do projeto.
                        name:
                          type: string
                          description: Nome do projeto.
                        description:
                          type: string
                          description: Descrição do que se trata o projeto.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Operação bem sucedida, retornando as informações do projeto deletado.
                  value:
                    {
                      "message": "Projeto deletado com sucesso!",
                      "success": true,
                      "data": {
                        "id": 19,
                        "name": "Projeto com ID 19",
                        "description": "Descrição teste"
                      }
                    }
        '401':
          description: Não autorizado.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: "null"
                    description: Dados adicionais retornados pela operação.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Usuário não está autenticado.
                  value:
                    {
                      "message": "Não autorizado",
                      "success": false,
                      "data": null
                    }

        '404':
          description: "Não encontrado."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                not_found:
                  summary: Exemplo de resposta
                  description: Projeto não encontrado; nenhum dado retornado.
                  value:
                    {
                      "message": "Projeto não encontrado!",
                      "success": false,
                      "data": null
                    }

        '500':
          description: "Erro interno do servidor!"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: string
                    description: Mensagem de erro do servidor.
              examples:
                internal_server_error_related_datasets:
                  summary: Exemplo de resposta
                  description: Erro ao deletar bases de dados relacionadas ao projeto.
                  value:
                    {
                      "message": "Erro ao deletar bases de dados relacionadas ao projeto!",
                      "success": false,
                      "data": "(sqlalchemy.exc.IntegrityError) (1451, 'Cannot delete or update a parent row: a foreign key constraint fails (`database`.`datasets`, CONSTRAINT `datasets_ibfk_1` FOREIGN KEY (`project_id`) REFERENCES `projects` (`id`))')\n[SQL: DELETE FROM projects WHERE projects.id = %(id)s]\n[parameters: {'id': 1}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"
            }

#   DOCUMENTAÇÃO DE CRUD DE BASES DE DADOS

  /datasets:
    get:
      tags:
        - "CRUD de Base de dados"
      summary: "Listagem de base de dados"
      description: "Retorna uma lista de todas as bases de dados do usuário autenticado."
      responses:
        '200':
          description: Operação bem sucedida.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          description: ID da base de dados.
                        name:
                          type: string
                          description: Nome da base de dados.
                        description:
                          type: string
                          description: Descrição da base de dados.
                        size_file:
                          type: string
                          description: Tamanho do arquivo da base de dados.
                        file_url:
                          type: string
                          description: URL do arquivo da base de dados.
                        project_id:
                          type: integer
                          description: ID do projeto ao qual a base de dados esta associada.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Operação bem sucedida, retornando a listagem de bases de dados do usuário autenticado.
                  value:
                    {
                      "message": "Bases de dados recuperadas com sucesso!",
                      "success": true,
                      "data": [
                        {
                          "id": 1,
                          "name": "Base de dados 1",
                          "description": "Dados de clientes para análise de churn",
                          "size_file": "2.5 MB",
                          "file_url": "https://s3.amazonaws.com/bucket-easyminer/datasets/1/file",
                          "project_id": 10
                        },
                        {
                          "id": 2,
                          "name": "Base de dados 2",
                          "description": "Dados de vendas do último ano",
                          "size_file": "3.7 MB",
                          "file_url": "https://s3.amazonaws.com/bucket-easyminer/datasets/2/file",
                          "project_id": 10
                        },
                        {
                          "id": 3,
                          "name": "Base de dados 3",
                          "description": "Informações de acessos ao sistema",
                          "size_file": "1.1 MB",
                          "file_url": "https://s3.amazonaws.com/bucket-easyminer/datasets/3/file",
                          "project_id": 12
                        },
                        {
                          "id": 4,
                          "name": "Base de dados 4",
                          "description": "Registros de transações financeiras",
                          "size_file": "4.0 MB",
                          "file_url": "https://s3.amazonaws.com/bucket-easyminer/datasets/4/file",
                          "project_id": 13
                        },
                        {
                          "id": 5,
                          "name": "Base de dados 5",
                          "description": "Dados de inventário",
                          "size_file": "1.2 MB",
                          "file_url": "https://s3.amazonaws.com/bucket-easyminer/datasets/5/file",
                          "project_id": 15
                        }
                      ]
                    }
        '401':
          description: Não autorizado.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: "null"
                    description: Dados adicionais retornados pela operação.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Usuário não está autenticado.
                  value:
                    {
                      "message": "Não autorizado",
                      "success": false,
                      "data": null
                    }

    post:
      tags:
        - "CRUD de Base de dados"
      summary: "Criar base de dados"
      description: "Cria uma nova base de dados para ser usada nos processos de KDD"
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - name
                - project_id
                - csv_file
              properties:
                name:
                  type: string
                  description: "Nome da base de dados. Deve ser único para o usuário atual."
                  minLength: 2
                  maxLength: 100
                  example: "Base de dados do setor financeiro"
                description:
                  type: string
                  description: "Descrição do que se trata a base de dados (opcional)."
                  minLength: 10
                  maxLength: 2000
                  example: "Base de dados para análise de transações financeiras."
                project_id:
                  type: integer
                  description: "ID do projeto associado. Deve ser válido e o usuário deve ter acesso ao projeto."
                  example: 123
                csv_file:
                  type: string
                  format: binary
                  description: "Arquivo CSV contendo os dados. Deve ser menor que 16MB."
      responses:
        '201':
          description: "Novo registro criado com sucesso."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: "Mensagem de retorno da operação."
                  success:
                    type: boolean
                    description: "Indica se a operação foi bem-sucedida."
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          description: "ID da base de dados."
                        name:
                          type: string
                          description: "Nome da base de dados."
                        description:
                          type: string
                          description: "Descrição da base de dados."
                        size_file:
                          type: string
                          description: "Tamanho da base de dados em MB."
                        file_url:
                          type: string
                          description: "URL do arquivo da base de dados."
                        project_id:
                          type: integer
                          description: "ID do projeto associado."
              examples:
                success:
                  summary: "Exemplo de resposta"
                  description: "Base de dados criada, os detalhes do novo projeto são retornados."
                  value:
                    message: "Base de dados criada com sucesso!"
                    success: true
                    data:
                      id: 76
                      name: "teste de cadastro de dataset"
                      description: "descrição teste"
                      size_file: "0.0037MB"
                      file_url: "https://s3.amazonaws.com/bucket-easyminer/datasets/5/file"
                      project_id: 12

        '401':
          description: Não autorizado.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: "null"
                    description: Dados adicionais retornados pela operação.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Usuário não está autenticado.
                  value:
                    {
                      "message": "Não autorizado!",
                      "success": false,
                      "data": null
                    }

        '422':
          description: Erros de validação.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                          description: Nome do campo que gerou o erro.
                        error:
                          type: string
                          description: Mensagem de erro associada ao campo.
              examples:
                validation_error_size_csv:
                  summary: Exemplo de resposta 1
                  description: Erro retornado quando o usuário faz o upload de uma base de dados com tamanho superior a 16MB.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": [
                        {
                          "csv_file": "O arquivo excede o tamanho máximo permitido."
                        }
                      ]
                    }
                validation_error_type_file:
                  summary: Exemplo de resposta 2
                  description: Erro retornado quando o usuário faz o upload de uma base de dados com uma extensão proibida.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": [
                        {
                          "csv_file": "Apenas arquivos CSV são permitidos."
                        }
                      ]
                    }

                validation_error_name:
                  summary: Exemplo de resposta 3
                  description: Erro retornado quando o usuário fornece um nome que ja existe para a base de dados.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": [
                        {
                          "name": "O nome da base de dados já existe."
                        }
                      ]
                    }

        '500':
          description: "Erro interno do servidor!"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: string
                    description: "Mensagem de erro do servidor."
              examples:
                internal_server_error:
                  summary: Exemplo de resposta.
                  description: Erro ao enviar o arquivo para a AWS.
                  value:
                    {
                      "message": "Erro ao realizar upload para o S3",
                      "success": false,
                      "data": "An error occurred (AccessDenied) when calling the PostObject operation: Access Denied"
                    }

  /datasets/{id}:
    get:
      tags:
        - "CRUD de Base de dados"
      summary: "Exibição de base de dados"
      description: "Retorna os detalhes de uma base de dados específica do usuário autenticado."
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "integer"
          description: "ID da base de dados"
      responses:
        '200':
          description: Operação bem sucedida.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          description: ID da base de dados.
                        name:
                          type: string
                          description: Nome da base de dados.
                        description:
                          type: string
                          description: Descrição da base de dados.
                        size_file:
                          type: string
                          description: Tamanho do arquivo da base de dados.
                        file_url:
                          type: string
                          description: URL do arquivo da base de dados.
                        project_id:
                          type: integer
                          description: ID do projeto ao qual a base de dados esta associada.
                        clean_dataset:
                          type: object
                          properties:
                            id:
                              type: integer
                              description: ID do dataset limpo.
                            size_file:
                              type: string
                              description: Tamanho do arquivo do dataset limpo.
                            file_url:
                              type: string
                              description: URL do arquivo do dataset limpo.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Operação bem sucedida, retornando a listagem de bases de dados do usuário autenticado.
                  value:
                    {
                      "message": "Base de dados recuperada com sucesso!",
                      "success": true,
                      "data": {
                        "id": 73,
                        "name": "teste de cadastro de datasethdfh",
                        "description": "oi teste master",
                        "size_file": "0.0228MB",
                        "file_url": "https://s3.amazonaws.com/bucket-easyminer/datasets/5/file",
                        "project_id": 12,
                        "clean_dataset": {
                          "id": 53,
                          "size_file": "0.0231MB",
                          "file_url": "https://s3.amazonaws.com/bucket-easyminer/datasets/5/file_clean"
                        }
                      }
                    }
        '401':
          description: Não autorizado.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Usuário não está autenticado.
                  value:
                    {
                      "message": "Não autorizado!",
                      "success": false,
                      "data": null
                    }
        '404':
          description: "Não encontrado."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                not_found:
                  summary: Exemplo de resposta
                  description: Projeto não encontrado; nenhum dado retornado.
                  value:
                    {
                      "message": "Base de dados não encontrada!",
                      "success": false,
                      "data": null
                    }

    put:
      tags:
        - "CRUD de Base de dados"
      summary: "Atualizar base de dados"
      description: "Atualiza uma base de dados existente."
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "integer"
          description: "ID da base de dados"
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: "Nome da base de dados. Deve ser único para o usuário atual."
                  minLength: 2
                  maxLength: 100
                  example: "Base de dados do setor de saude"
                description:
                  type: string
                  description: "Descrição do que se trata a base de dados."
                  minLength: 10
                  maxLength: 2000
                  example: "Base de dados para análise de pacientes."
                project_id:
                  type: integer
                  description: "ID do projeto associado. Deve ser válido e o usuário deve ter acesso ao projeto."
                  example: 6534
                csv_file:
                  type: string
                  format: binary
                  description: "Arquivo CSV contendo os dados. Deve ser menor que 16MB."
            examples:
              success:
                summary: Exemplo de requisição
                value:
                  {
                    "csv_file": "Novo arquivo CSV",
                  }
      responses:
        '200':
          description: "Registro atualizado com sucesso."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: "Mensagem de retorno da operação."
                  success:
                    type: boolean
                    description: "Indica se a operação foi bem-sucedida."
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          description: "ID da base de dados."
                        name:
                          type: string
                          description: "Nome da base de dados."
                        description:
                          type: string
                          description: "Descrição da base de dados."
                        size_file:
                          type: string
                          description: "Tamanho da base de dados em MB."
                        file_url:
                          type: string
                          description: "URL do arquivo da base de dados."
                        project_id:
                          type: integer
                          description: "ID do projeto associado."
              examples:
                success:
                  summary: "Exemplo de resposta"
                  description: "Base de dados atualizada, os detalhes do novo projeto são retornados."
                  value:
                    message: "Base de dados criada com sucesso!"
                    success: true
                    data:
                      id: 76
                      name: "teste de alteração de dataset"
                      description: "descrição teste"
                      size_file: "0.0037MB"
                      file_url: "https://s3.amazonaws.com/bucket-easyminer/datasets/5/file"
                      project_id: 12

        '401':
          description: Não autorizado.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: "null"
                    description: Dados adicionais retornados pela operação.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Usuário não está autenticado.
                  value:
                    {
                      "message": "Não autorizado!",
                      "success": false,
                      "data": null
                    }

        '422':
          description: Erros de validação.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                          description: Nome do campo que gerou o erro.
                        error:
                          type: string
                          description: Mensagem de erro associada ao campo.
              examples:
                validation_error_size_csv:
                  summary: Exemplo de resposta 1
                  description: Erro retornado quando o usuário faz o upload de uma base de dados com tamanho superior a 16MB.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": [
                        {
                          "csv_file": "O arquivo excede o tamanho máximo permitido."
                        }
                      ]
                    }
                validation_error_type_file:
                  summary: Exemplo de resposta 2
                  description: Erro retornado quando o usuário faz o upload de uma base de dados com uma extensão proibida.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": [
                        {
                          "csv_file": "Apenas arquivos CSV são permitidos."
                        }
                      ]
                    }

                validation_error_name:
                  summary: Exemplo de resposta 3
                  description: Erro retornado quando o usuário fornece um nome que ja existe para a base de dados.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": [
                        {
                          "name": "O nome da base de dados já existe."
                        }
                      ]
                    }

        '500':
          description: "Erro interno do servidor!"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: string
                    description: "Mensagem de erro do servidor."
              examples:
                internal_server_error:
                  summary: Exemplo de resposta.
                  description: Erro ao enviar o arquivo para a AWS.
                  value:
                    {
                      "message": "Erro ao realizar upload para o S3",
                      "success": false,
                      "data": "An error occurred (AccessDenied) when calling the PutObject operation: Access Denied"
                    }
    delete:
      tags:
        - "CRUD de Base de dados"
      summary: "Exclui base de dados"
      description: "Exclui uma base de dados existente, assim como todos datasets limpos relacionados."
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "integer"
          description: "ID da base de dados"

      responses:
        '200':
          description: Operação bem sucedida.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          description: ID da base de dados.
                        name:
                          type: string
                          description: Nome da base de dados.
                        description:
                          type: string
                          description: Descrição da base de dados.
                        size_file:
                          type: string
                          description: Tamanho do arquivo da base de dados.
                        file_url:
                          type: string
                          description: URL do arquivo da base de dados.
                        project_id:
                          type: integer
                          description: ID do projeto ao qual a base de dados esta associada.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Operação bem sucedida, retornando as informações do projeto deletado.
                  value:
                    {
                      "message": "Base de dados deletada com sucesso!",
                      "success": true,
                      "data": {
                        "id": 73,
                        "name": "Base de dados excluida",
                        "description": "Descrição da base de dados",
                        "size_file": "0.0228MB",
                        "file_url": "https://s3.amazonaws.com/bucket-easyminer/datasets/3/file",
                        "project_id": 12
                      }
                    }
        '401':
          description: Não autorizado.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: "null"
                    description: Dados adicionais retornados pela operação.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Usuário não está autenticado.
                  value:
                    {
                      "message": "Não autorizado",
                      "success": false,
                      "data": null
                    }

        '404':
          description: "Não encontrado."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                not_found:
                  summary: Exemplo de resposta
                  description: Base de dados não encontrada; nenhum dado retornado.
                  value:
                    {
                      "message": "Não encontrado!",
                      "success": false,
                      "data": "Base de dados não encontrada!"
                    }

        '500':
          description: "Erro interno do servidor!"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: string
                    description: Mensagem de erro do servidor.
              examples:
                internal_server_error_s3_delete_object:
                  summary: Exemplo de resposta 1.
                  description: Erro interno ao tentar excluir um arquivo do bucket no Amazon S3 devido a falha interna.
                  value:
                    {
                      "message": "Erro ao realizar exclusão da base de dados no servidor AWS!",
                      "success": false,
                      "data": "An error occurred (InternalError) when calling the DeleteObject operation: We encountered an internal error while deleting the object. Please try again later. (RequestId: example-request-id, HostId: example-host-id)"
                    }

                internal_server_error_related_clean_dataset:
                  summary: Exemplo de resposta 2.
                  description: Erro interno ao tentar excluir um dataset.
                  value:
                    {
                      "message": "Erro ao deletar registros relacionados ao dataset!",
                      "success": false,
                      "data": "(sqlalchemy.exc.IntegrityError) (1451, 'Cannot delete or update a parent row: a foreign key constraint fails (`database`.`clean_dataset`, CONSTRAINT `clean_dataset_ibfk_1` FOREIGN KEY (`dataset_id`) REFERENCES `dataset` (`id`))')\n[SQL: DELETE FROM dataset WHERE dataset.id = %(id)s]\n[parameters: {'id': 1}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"
                    }


  /preprocessing/data-cleaning/{id}:
    post:
      tags:
        - "Pré-processamento"
      summary: "Realizar limpeza de dados"
      description: "Realiza a limpeza de dados em um dataset específico. O usuário deve fornecer os métodos de limpeza a serem aplicados nas features escolhidas, assim como os valores faltantes a serem substituídos."
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "integer"
          description: "ID da base de dados"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - features
                - methods
                - missing_values
              properties:
                features:
                  type: array
                  items:
                    type: string
                  description: "Lista de features a serem limpas."
                methods:
                  type: string
                  description: "Método de limpeza a ser aplicado."
                  enum:
                    - media
                    - mediana
                    - moda
                missing_values:
                  type: array
                  items:
                    type: string
                    enum:
                      - "0"
                      - "null"
                      - ""
                      - "?"
                  description: "Valores a serem substituídos."
            examples:
              success:
                summary: Exemplo de requisição
                value:
                  {
                    "features-0": "Coluna 1",
                    "features-1": "Coluna 2",
                    "missing_values-0": "0",
                    "missing_values-1": "null",
                    "missing_values-2": "?",
                    "methods": "media"
                  }
      responses:
        '200':
          description: Limpeza de dados realizada com sucesso na etapa de pré-processamento
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: "Mensagem de retorno da operação."
                  success:
                    type: boolean
                    description: "Indica se a operação foi bem-sucedida."
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        clean_dataset:
                          type: object
                          properties:
                            id:
                              type: integer
                              description: ID do dataset limpo.
                            size_file:
                              type: string
                              description: Tamanho do arquivo do dataset limpo.
                            file_url:
                              type: string
                              description: URL do arquivo do dataset limpo.
              examples:
                success:
                  summary: "Exemplo de resposta"
                  description: "Limpeza de dados realizada com sucesso na etapa de pré-processamento, os detalhes do dataset limpo são retornados."
                  value:
                    {
                        "message": "Limpeza de dados realizada com sucesso!",
                        "success": true,
                        "data": {
                            "clean_dataset": {
                                "id": 64,
                                "size_file": "0.0231MB",
                                "file_url": "https://s3.amazonaws.com/bucket-easyminer/datasets/5/file_clean",
                            }
                        }
                    }

        '422':
          description: Erros de validação.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                          description: Nome do campo que gerou o erro.
                        error:
                          type: string
                          description: Mensagem de erro associada ao campo.
              examples:
                validation_error_features:
                  summary: Exemplo de resposta 1
                  description: Erro retornado quando é fornecido uma coluna que não pertence ao dataset.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": [
                        {
                          "features": [
                            "Os seguintes campos não estão registrados na sua base de dados: COLUNA_ERRADA1, COLUNA_ERRADA2"
                          ]
                        }
                      ]
                    }
                validation_error_method:
                  summary: Exemplo de resposta 2
                  description: Erro retornado quando é fornecido um método inválido de limpeza de dados.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": {
                        "methods": [
                          "Opção inválida: METODO INEXISTENTE. Selecione uma opção válida."
                        ]
                      }
                    }
                validation_error_invalid_missing_values:
                  summary: Exemplo de resposta 2
                  description: Erro retornado quando é fornecido valores faltantes que não são aceitáveis pelo sistema.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": {
                        "missing_values": [
                          "Opção inválida: VALOR FALTANTE ERRONEO. Selecione uma opção válida."
                        ]
                      }
                    }

        '404':
          description: "Não encontrado."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                not_found:
                  summary: Exemplo de resposta
                  description: Base de dados não encontrada; nenhum dado retornado.
                  value:
                    {
                      "message": "Base de dados não encontrada!",
                      "success": false,
                      "data": null
                    }

        '401':
          description: Não autorizado!.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: "null"
                    description: Dados adicionais retornados pela operação.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Usuário não está autenticado.
                  value:
                    {
                      "message": "Não autorizado",
                      "success": false,
                      "data": null
                    }

        '500':
          description: "Erro interno do servidor!"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: string
                    description: "Mensagem de erro do servidor."
              examples:
                internal_server_error:
                  summary: Exemplo de resposta.
                  description: Erro ao enviar o arquivo para a AWS.
                  value:
                    {
                      "message": "Erro ao realizar upload para o S3",
                      "success": false,
                      "data": "An error occurred (AccessDenied) when calling the PostObject operation: Access Denied"
                    }

  /preprocessing/data-normalization/{id}:
    post:
      tags:
        - "Pré-processamento"
      summary: "Realizar normalização de dados"
      description: "Aplica a normalização de dados em um dataset específico. O usuário deve fornecer os métodos de normalização a serem aplicados nas features escolhidas."
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "integer"
          description: "ID da base de dados"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - features
                - methods
              properties:
                features:
                  type: array
                  items:
                    type: string
                  description: "Lista de features a serem normalizadas."
                methods:
                  type: string
                  description: "Método de normalização a ser aplicado."
                  enum:
                    - minmax
                    - zscore
            examples:
              success:
                summary: Exemplo de requisição
                value:
                  {
                    "features-0": "Coluna 1",
                    "features-1": "Coluna 2",
                    "methods": "minmax"
                  }
      responses:
        '200':
          description: Normalização de dados realizada com sucesso na etapa de pré-processamento
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: "Mensagem de retorno da operação."
                  success:
                    type: boolean
                    description: "Indica se a operação foi bem-sucedida."
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        normalized_dataset:
                          type: object
                          properties:
                            id:
                              type: integer
                              description: ID do dataset normalizado.
                            size_file:
                              type: string
                              description: Tamanho do arquivo do dataset normalizado.
                            file_url:
                              type: string
                              description: URL do arquivo do dataset normalizado.
              examples:
                success:
                  summary: "Exemplo de resposta"
                  description: "Normalização de dados realizada com sucesso na etapa de pré-processamento, os detalhes do dataset normalizado são retornados."
                  value:
                    {
                      "message": "Normalização de dados realizada com sucesso!",
                      "success": true,
                      "data": {
                        "normalized_dataset": {
                          "id": 65,
                          "size_file": "0.0255MB",
                               "file_url": "https://s3.amazonaws.com/bucket-easyminer/datasets/5/file_normalized",
                        }
                      }
                    }

        '422':
          description: Erros de validação.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                          description: Nome do campo que gerou o erro.
                        error:
                          type: string
                          description: Mensagem de erro associada ao campo.
              examples:
                validation_error_features:
                  summary: Exemplo de resposta 1
                  description: Erro retornado quando é fornecido uma coluna que não pertence ao dataset.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": {
                        "features": [
                          "Os seguintes campos não estão registrados na sua base de dados: COLUNA_ERRADA1, COLUNA_ERRADA2"
                        ]
                      }
                    }
                validation_error_method:
                  summary: Exemplo de resposta 2
                  description: Erro retornado quando é fornecido um método inválido de normalização de dados.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": {
                        "methods": [
                          "Método inválido: METODO-ERRADO. Selecione uma opção válida."
                        ]
                      }
                    }

        '404':
          description: "Não encontrado."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                not_found:
                  summary: Exemplo de resposta
                  description: Base de dados não encontrada; nenhum dado retornado.
                  value:
                    {
                      "message": "Base de dados não encontrada!",
                      "success": false,
                      "data": null
                    }

        '401':
          description: Não autorizado!.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: "null"
                    description: Dados adicionais retornados pela operação.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Usuário não está autenticado.
                  value:
                    {
                      "message": "Não autorizado",
                      "success": false,
                      "data": null
                    }

        '500':
          description: "Erro interno do servidor!"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: string
                    description: "Mensagem de erro do servidor."
              examples:
                internal_server_error:
                  summary: Exemplo de resposta.
                  description: Erro ao enviar o arquivo para a AWS.
                  value:
                    {
                      "message": "Erro ao realizar upload para o S3",
                      "success": false,
                      "data": "An error occurred (AccessDenied) when calling the PostObject operation: Access Denied"
                    }

  /preprocessing/data-reduction/{id}:
    post:
      tags:
        - "Pré-processamento"
      summary: "Realiza a redução de dados"
      description: "Aplica a redução de dados em um dataset específico. O usuário deve fornecer os métodos de redução a serem aplicados nas features escolhidas."
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "integer"
          description: "ID da base de dados"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - features
                - methods
              properties:
                features:
                  type: array
                  items:
                    type: string
                  description: >
                    Lista de features a serem consideradas para a redução dimensional. 
                    Se o método escolhido for PCA, recomenda-se incluir todas as features. 
                    Para amostragem, apenas uma coluna deve ser usada.
                methods:
                  type: string
                  description: Método de redução a ser aplicado.
                  enum:
                    - pca
                    - amostragem_aleatoria
                    - amostragem_sistematica
                random_records:
                  type: integer
                  description: >
                    Quantidade de registros para a amostragem aleatória. 
                    Deve ser menor ou igual ao total de registros disponíveis no dataset.
                systematic_records:
                  type: integer
                  description: >
                    Quantidade de registros para a amostragem sistemática. 
                    Deve ser menor ou igual ao total de registros disponíveis no dataset.
                    Deve ser aplicado a **SOMENTE** uma feature(coluna).
                systematic_method:
                  type: string
                  description: >
                    Critério para a seleção de registros na amostragem sistemática. 
                    Define se os maiores ou menores valores serão escolhidos.
                  enum:
                    - maiores
                    - menores
            examples:
              success:
                summary: Exemplo de requisição
                value:
                  {
                    "features-0": "Coluna 1",
                    "methods": "amostragem_sistematica",
                    "systematic_records": 5000,
                    "systematic_method": "maiores"
                  }
      responses:
        '200':
          description: Redução de dados realizada com sucesso na etapa de pré-processamento
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: "Mensagem de retorno da operação."
                  success:
                    type: boolean
                    description: "Indica se a operação foi bem-sucedida."
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        reduced_dataset:
                          type: object
                          properties:
                            id:
                              type: integer
                              description: ID do dataset reduzido.
                            size_file:
                              type: string
                              description: Tamanho do arquivo do dataset reduzido.
                            file_url:
                              type: string
                              description: URL do arquivo do dataset reduzido.
              examples:
                success:
                  summary: "Exemplo de resposta"
                  description: "Redução de dados realizada com sucesso na etapa de pré-processamento, os detalhes do dataset reduzido são retornados."
                  value:
                    {
                      "message": "Redução de dados realizada com sucesso!",
                      "success": true,
                      "data": {
                        "reduced_dataset": {
                          "id": 68,
                          "size_file": "0.0279MB",
                          "file_url": "https://s3.amazonaws.com/bucket-easyminer/datasets/5/file_reduced",
                          "original_dataset_id": 77
                        }
                      }
                    }

        '422':
          description: Erros de validação.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                          description: Nome do campo que gerou o erro.
                        error:
                          type: string
                          description: Mensagem de erro associada ao campo.
              examples:
                validation_error_feature_selection:
                  summary: Exemplo de resposta 1
                  description: Erro retornado quando é fornecido mais de uma coluna.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": {
                        "features": [
                          "Apenas uma feature deve ser selecionada."
                        ]
                      }
                    }

                validation_error_sample_size_exceeds_records:
                  summary: Exemplo de resposta 2
                  description: Erro retornado quando é fornecido uma amostra de dados maior do que a quantidade de registros do dataset.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": {
                        "systematic_records": [
                          "Amostra maior que o número de registros disponíveis."
                        ]
                      }
                    }
                validation_error_features:
                  summary: Exemplo de resposta 3
                  description: Erro retornado quando é fornecido uma coluna que não pertence ao dataset.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": {
                        "features": [
                          "Os seguintes campos não estão registrados na sua base de dados: COLUNA_ERRADA1, COLUNA_ERRADA2"
                        ]
                      }
                    }
                validation_error_method:
                  summary: Exemplo de resposta 4
                  description: Erro retornado quando é fornecido um método inválido de redução de dados.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": {
                        "methods": [
                          "Método inválido: METODO-ERRADO. Selecione uma opção válida."
                        ]
                      }
                    }

        '404':
          description: "Não encontrado."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: object
                    nullable: true
                    description: Dados adicionais retornados pela operação.
              examples:
                not_found:
                  summary: Exemplo de resposta
                  description: Base de dados não encontrada; nenhum dado retornado.
                  value:
                    {
                      "message": "Base de dados não encontrada!",
                      "success": false,
                      "data": null
                    }

        '401':
          description: Não autorizado!.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: "null"
                    description: Dados adicionais retornados pela operação.
              examples:
                success:
                  summary: Exemplo de resposta
                  description: Usuário não está autenticado.
                  value:
                    {
                      "message": "Não autorizado",
                      "success": false,
                      "data": null
                    }

        '500':
          description: "Erro interno do servidor!"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Mensagem de retorno da operação.
                  success:
                    type: boolean
                    description: Indica se a operação foi bem-sucedida.
                  data:
                    type: string
                    description: "Mensagem de erro do servidor."
              examples:
                internal_server_error:
                  summary: Exemplo de resposta.
                  description: Erro ao enviar o arquivo para a AWS.
                  value:
                    {
                      "message": "Erro ao realizar upload para o S3",
                      "success": false,
                      "data": "An error occurred (AccessDenied) when calling the PostObject operation: Access Denied"
                    }


  /data_visualization/frequency_distribution/{id}:
    post:
      tags:
        - "Visualização de Dados"
      summary: "Realiza a distribuição de frequência"
      description: |
        Realiza a distribuição de frequência em um dataset específico. O usuário pode escolher entre usar o dataset original ou o dataset limpo (se disponível).
        A distribuição de frequência é calculada para as colunas (features) especificadas.
      parameters:
        - name: "id"
          in: "path"
          required: true
          schema:
            type: "integer"
          description: "ID da base de dados."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - features
                - use_clean_dataset
              properties:
                features:
                  type: array
                  items:
                    type: string
                  description: "Lista de colunas (features) para as quais a distribuição de frequência será calculada."
                use_clean_dataset:
                  type: boolean
                  description: |
                    Indica se o dataset limpo deve ser usado. 
                    - `true`: Usa o dataset limpo (se disponível).
                    - `undefined(campo ausente)`: Usa o dataset original.
            examples:
              success:
                summary: Exemplo de requisição
                value:
                  {
                    "features": [ "Coluna 1", "Coluna 2" ],
                    "use_clean_dataset": true
                  }
      responses:
        '200':
          description: Distribuição de frequência realizada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: "Mensagem de retorno da operação."
                  success:
                    type: boolean
                    description: "Indica se a operação foi bem-sucedida."
                  data:
                    type: object
                    properties:
                      frequency_distribution:
                        type: array
                        items:
                          type: object
                          properties:
                            feature:
                              type: string
                              description: "Nome da coluna (feature) analisada."
                            intervals:
                              type: array
                              items:
                                type: object
                                properties:
                                  interval:
                                    type: string
                                    description: "Intervalo da distribuição de frequência (ex: '10 - 20')."
                                  frequency:
                                    type: integer
                                    description: "Frequência de valores no intervalo."
              examples:
                success:
                  summary: "Exemplo de resposta"
                  description: "Distribuição de frequência realizada com sucesso"
                  value:
                    {
                      "message": "Distribuição de frequência realizada com sucesso!",
                      "success": true,
                      "data": {
                        "Coluna 1": {
                          "frequency_distribution": [
                            {
                              "interval": "0 - 20",
                              "frequency": 5
                            },
                            {
                              "interval": "20 - 40",
                              "frequency": 0
                            },
                            {
                              "interval": "40 - 60",
                              "frequency": 4
                            },
                            {
                              "interval": "60 - 80",
                              "frequency": 32
                            }
                          ]
                        },
                        "Coluna 2": {
                          "frequency_distribution": [
                            {
                              "interval": "0 - 10",
                              "frequency": 231
                            },
                            {
                              "interval": "10 - 20",
                              "frequency": 107
                            },
                            {
                              "interval": "20 - 30",
                              "frequency": 165
                            }
                          ]
                        }
                      }
                    }

        '422':
          description: Erros de validação.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: "Mensagem de retorno da operação."
                  success:
                    type: boolean
                    description: "Indica se a operação foi bem-sucedida."
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        field:
                          type: string
                          description: "Nome do campo que gerou o erro."
                        error:
                          type: string
                          description: "Mensagem de erro associada ao campo."
              examples:
                validation_error_features:
                  summary: Exemplo de resposta 1
                  description: Erro retornado quando uma coluna fornecida não existe no dataset.
                  value:
                    {
                      "message": "Dados inválidos!",
                      "success": false,
                      "data": [
                        {
                          "field": "features",
                          "error": "A coluna 'Coluna Inexistente' não foi encontrada no dataset."
                        }
                      ]
                    }

        '404':
          description: "Não encontrado."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: "Mensagem de retorno da operação."
                  success:
                    type: boolean
                    description: "Indica se a operação foi bem-sucedida."
                  data:
                    type: object
                    nullable: true
                    description: "Dados adicionais retornados pela operação."
              examples:
                not_found:
                  summary: Exemplo de resposta
                  description: Base de dados não encontrada; nenhum dado retornado.
                  value:
                    {
                      "message": "Base de dados não encontrada!",
                      "success": false,
                      "data": null
                    }
                clean_dataset_not_found:
                  summary: Exemplo de resposta 2
                  description: Dataset limpo não encontrado.
                  value:
                    {
                      "message": "Dataset limpo não encontrado!",
                      "success": false,
                      "data": null
                    }

        '401':
          description: "Não autorizado."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: "Mensagem de retorno da operação."
                  success:
                    type: boolean
                    description: "Indica se a operação foi bem-sucedida."
                  data:
                    type: "null"
                    description: "Dados adicionais retornados pela operação."
              examples:
                unauthorized:
                  summary: Exemplo de resposta
                  description: Usuário não está autenticado.
                  value:
                    {
                      "message": "Não autorizado",
                      "success": false,
                      "data": null
                    }

        '500':
          description: "Erro interno do servidor."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: "Mensagem de retorno da operação."
                  success:
                    type: boolean
                    description: "Indica se a operação foi bem-sucedida."
                  data:
                    type: string
                    description: "Mensagem de erro do servidor."
              examples:
                internal_server_error:
                  summary: Exemplo de resposta
                  description: Erro ao calcular a distribuição de frequência.
                  value:
                    {
                      "message": "Erro ao calcular a distribuição de frequência!",
                      "success": false,
                      "data": "Erro ao calcular distribuição de frequência: module 'numpy' has no attribute 'log5265235'"
                    }